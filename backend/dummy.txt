#RESEARCH LATER: how to use redirect to return json from another method

#goal: return json object as 
#{body: {text: "", image: "base64string -> turn to image"}}
@app.route('/handle-video-to-text-and-image', methods=['POST'])
def handle_video_to_text_and_image():
    #dummy rn, do later when oscar's finished
    response = {
        "body": {
            "text": "dummy text of asl",
            "image": "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8Xw8AAgMBAPXnD3YAAAAASUVORK5CYII="
            
        }
    }
    return jsonify(response)

socketio not needed

@socketio.on('video_stream')
def handle_video_stream(data):
    #decode image
    np_array = np.frombuffer(data, np.uint8)
    frame = cv2.imdecode(np_array, cv2.IMREAD_COLOR)

    #save frame as video
    if frame is not None:
        out.write(frame)

@socketio.on('start_stream')
def start_stream():
    global out
    #create videowriter object to save video
    fourcc = cv2.VideoWriter_fourcc(*'XVID')
    out = cv2.VideoWriter("output.avi", fourcc, 20.0, (640, 480))

@socketio.on('stop_stream')
def stop_stream():
    out.release()
    emit('stream_stopped')

